%h1= @app.name
%div= @app.url

%h2 Docker Registry

%div= @app.docker_registry.name
%div= @app.docker_registry.host + ":" + @app.docker_registry.port

%h2 All Image Tags

- @tags.each do |tag|
  %div= tag

%h2 Stage Server
%div= link_to "Add Stage Server", new_docker_server_url(@app, type: "stage")
- @stage.each_with_index do |server, i|
  %h3= (i+1).to_s + " : " + server.name
  %div= server.host + ":" + server.port
  %div= server.description
  -# %div= server.box.containers
  %table
    %tr
      %th Tag
      %th Container Status
      %th Link
      %th Control
    - server.box.app_containers(@tags).each do |tag|
      %tr
        %td= tag[:image_tag]
        %td
          - tag[:containers].each do |container| 
            = container.short_id
            = container.name
            <br/>
            %div{style: "border: 1px solid gray"}
              - container.urls.each do |url|
                = link_to url[0], url[0]
                (Original_port: 
                = url[1]
                )
                <br/>
            <br/>
        %td 
          = "http://" unless tag[:containers].empty?
        %td
          = run_container_link(server, @app, tag[:image_tag]) if tag[:containers].empty?
          - tag[:containers].each do |container|
            = stop_container_link(server, container.short_id)

%h2 Deploy Server
%div= link_to "Add Deploy Server", new_docker_server_url(@app, type: "deploy")
- @deploy.each_with_index do |server, i|
  %h3= (i+1).to_s + " : " + server.name
  %div= server.host + ":" + server.port
  %div= server.description
